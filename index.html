<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Meru | Verificaci√≥n de identidad</title>
  </head>
  <body>
    <metamap-button clientid="621d444848f61d001c0c7f6b"></metamap-button>

    <script>
      var params = new URLSearchParams(window.location.search);

      var userId = params.get("userId");
      var flowId = params.get("flowId");

      console.log(userId);
      console.log(flowId);

      const button = document.querySelector("metamap-button");

      button.setAttribute("flowId", flowId);
      button.setAttribute("metadata", `{'userId': '${userId}'}`);

      button.addEventListener("metamap:loaded", ({ detail }) =>
        console.log("[METAMAP] Loaded", detail)
      );
      button.addEventListener("metamap:userStartedSdk", ({ detail }) =>
        console.log("[METAMAP] User started verification", detail)
      );
      button.addEventListener("metamap:userFinishedSdk", ({ detail }) =>
        console.log("[METAMAP] User finished verification", detail)
      );
      button.addEventListener("metamap:exitedSdk", ({ detail }) =>
        console.log("[METAMAP] User exited verification", detail)
      );
    </script>

    <script module src="https://web-button.getmati.com/button.js"></script>
  </body>
</html>
